LWR.define("snake/game/v/1_0_0",["exports","lwc/v/6_7_2"],function(h,s){"use strict";function f(c,e,r){var t=c?"["+c+"]":"";return".header"+t+" {background: rgb(193, 255, 70);color: rgb(24, 24, 24);font-size: 1rem;}.game-container"+t+" {width: 100%;height: 56vh;background: rgb(193, 255, 70);text-align: center;}.game-play"+t+" div"+t+" {width: 20px;height: 20px;background: rgb(230, 250, 190);display: inline-block;}.snake"+t+" {background: #008001 !important;}.food"+t+" {background: #b90909 !important;border-radius: 50%;}.overlay"+t+" {position: relative;width: 100%;margin-top: -30vh;left: 0;bottom: 0;z-index: 9;}.overlay-content"+t+" {position: relative;top: 50%;text-align: center;}"}var g=[f];const y=s.parseFragment`<div class="header slds-var-p-around_x-small${0}"${2}><div class="slds-grid${0}"${2}><div class="slds-col slds-size_1-of-3${0}"${2}>${"t3"}</div><div class="slds-col slds-size_1-of-3 slds-text-align_center${0}"${2}>${"t5"}</div><div class="slds-col slds-size_1-of-3 slds-text-align_right${0}"${2}>${"t7"}</div></div></div>`,k=s.parseFragment`<div${"c0"}${"a0:data-reference"}${2}>Â </div>`,p=s.parseFragment`<div class="slds-text-heading_large${0}"${2}>Game Over!</div>`,x=s.parseFragment`<br${3}>`,b=s.parseFragment`<button class="slds-button slds-button_brand${0}"${2}>Play Again</button>`,d=s.parseFragment`<div class="slds-text-heading_medium${0}"${2}>Use Arrow Keys to move the snake</div>`,S=s.parseFragment`<br${3}>`,$=s.parseFragment`<button class="slds-button slds-button_brand${0}"${2}>Start Game</button>`,w={classMap:{"game-container":!0},key:2},i={classMap:{"game-play":!0},key:3},H={classMap:{overlay:!0},key:6},M={classMap:{"overlay-content":!0},key:7};function o(c,e,r,t){const{d:n,sp:l,st:a,k:m,i:F,h:v,b:B}=c,{_m0:C,_m1:I,_m2:j,_m3:z}=t;return[a(y,1,[l(3,null,"Score: "+n(e.score)),l(5,null,"Speed: "+n(e.displaySpeed)+"x"),l(7,null,"High Score: "+n(e.highScore))]),v("div",w,[v("div",i,F(e.gameBlocks,function(_){return a(k,m(5,_.id),[l(0,{className:_.class,attrs:{"data-reference":_.id}},null)])})),e.showOverlay?v("div",H,[v("div",M,[e.gameOver?a(p,9):null,e.gameOver?a(x,11):null,e.gameOver?a(b,13,[l(0,{on:{click:I||(t._m1=B(e.resetGame))}},null)]):null,e.gameOver?null:a(d,15),e.gameOver?null:a(S,17),e.gameOver?null:a($,19,[l(0,{on:{click:z||(t._m3=B(e.startGame))}},null)])])]):null])]}var O=s.registerTemplate(o);o.stylesheets=[],g&&o.stylesheets.push.apply(o.stylesheets,g),o.stylesheetToken="lwc-6000sdkgra",o.legacyStylesheetToken="snake-game_game",s.freezeTemplate(o);class u extends s.LightningElement{constructor(...e){super(...e);this.gameBlocks=[],this.score=0,this.highScore=0,this.blockSize=20,this.renderComplete=!1,this.xSpeed=1,this.ySpeed=0,this.xHead=0,this.yHead=0,this.xMax=void 0,this.yMax=void 0,this.tail=[],this.showOverlay=!0,this.gameOver=!1,this.speed=1,this.intervalObj=void 0}connectedCallback(){this.highScore=localStorage.getItem("lwc_snake_highscore")?localStorage.getItem("lwc_snake_highscore"):0}renderedCallback(){this.renderComplete||(this.renderComplete=!0,this.renderGameBlocks(),this.addKeyboardControls(),this.generateFood(),window.addEventListener("resize",()=>{this.resetGameMetrics(),this.showOverlay=!0,this.gameOver=!1}))}startGame(){this.showOverlay=!1,this.intervalObj=setInterval(()=>{this.move()},300/this.speed)}addSpeed(){this.speed=this.speed+.1,clearInterval(this.intervalObj),this.startGame()}move(){if(this.tail[this.tail.length-1]!==`${this.xHead}:${this.yHead}`){this.tail.push(`${this.xHead}:${this.yHead}`);const r=this.tail.shift(),t=this.gameBlocks.findIndex(n=>n.id===r);this.gameBlocks[t].snake=!1,this.gameBlocks[t].class=""}if(this.xHead+=this.xSpeed,this.yHead+=this.ySpeed,this.xHead>=this.xMax&&(this.xHead=0),this.xHead<0&&(this.xHead=this.xMax-1),this.yHead>=this.yMax&&(this.yHead=0),this.yHead<0&&(this.yHead=this.yMax-1),this.tail.includes(`${this.xHead}:${this.yHead}`))this.exitGame();else{const r=this.gameBlocks.findIndex(t=>t.id===`${this.xHead}:${this.yHead}`);this.gameBlocks[r].snake=!0,this.gameBlocks[r].class="snake",this.gameBlocks[r].food&&(this.score++,this.score>this.highScore&&(this.highScore=this.score,localStorage.setItem("lwc_snake_highscore",this.highScore)),this.addSpeed(),this.tail.push(`${this.xHead}:${this.yHead}`),this.gameBlocks[r].food=!1,this.generateFood())}}addKeyboardControls(){window.addEventListener("keydown",e=>{switch(e.preventDefault(),e.key){case"ArrowUp":this.xSpeed=0,this.ySpeed=-1;break;case"ArrowDown":this.xSpeed=0,this.ySpeed=1;break;case"ArrowLeft":this.xSpeed=-1,this.ySpeed=0;break;case"ArrowRight":this.xSpeed=1,this.ySpeed=0;break}})}generateFood(){const e=Math.floor(Math.random()*(this.xMax-1)),r=Math.floor(Math.random()*(this.yMax-1));if(this.tail.includes(`${e}:${r}`))this.generateFood();else{const t=this.gameBlocks.findIndex(n=>n.id===`${e}:${r}`);this.gameBlocks[t]&&(this.gameBlocks[t].food=!0,this.gameBlocks[t].class="food")}}renderGameBlocks(){const e=this.template.querySelector(".game-container"),r=e.clientWidth,t=e.clientHeight;this.xMax=Math.floor(r/this.blockSize),this.yMax=Math.floor(t/this.blockSize);const n=[];for(let l=0;l<this.yMax;l++)for(let a=0;a<this.xMax;a++){let m;a===0&&l===0?m={id:`${a}:${l}`,snake:!0,food:!1,class:"snake"}:m={id:`${a}:${l}`,snake:!1,food:!1,class:""},n.push(m)}this.gameBlocks=n}resetGameMetrics(){this.xSpeed=1,this.ySpeed=0,this.xHead=0,this.yHead=0,this.tail=[],this.score=0,this.speed=1,this.renderGameBlocks(),this.generateFood(),clearInterval(this.intervalObj)}resetGame(){this.resetGameMetrics(),this.startGame()}exitGame(){this.showOverlay=!0,this.gameOver=!0,clearInterval(this.intervalObj)}get displaySpeed(){return this.speed.toFixed(1)}}s.registerDecorators(u,{track:{gameBlocks:1},fields:["score","highScore","blockSize","renderComplete","xSpeed","ySpeed","xHead","yHead","xMax","yMax","tail","showOverlay","gameOver","speed","intervalObj"]});const G=s.registerComponent(u,{tmpl:O,sel:"snake-game",apiVersion:62});h.default=G,Object.defineProperty(h,"__esModule",{value:!0})}),LWR.define("snake/app/v/1_0_0",["exports","lwc/v/6_7_2","snake/game/v/1_0_0"],function(h,s,f){"use strict";function g(i){return i&&typeof i=="object"&&"default"in i?i:{default:i}}var y=g(f);function k(i,H,M){var o=i?"["+i+"]":"";return".container"+o+" {width: 60vw;margin: 0 auto;margin-top: 0;}header"+o+" {line-height: 30px;}"}var p=[k];const x={classMap:{container:!0},key:0},b={key:1};function d(i,H,M,o){const{c:O,h:u}=i;return[u("div",x,[O("snake-game",y.default,b)])]}var S=s.registerTemplate(d);d.stylesheets=[],p&&d.stylesheets.push.apply(d.stylesheets,p),d.stylesheetToken="lwc-6m8ifv7aahe",d.legacyStylesheetToken="snake-app_app",s.freezeTemplate(d);class $ extends s.LightningElement{}const w=s.registerComponent($,{tmpl:S,sel:"snake-app",apiVersion:62});h.default=w,Object.defineProperty(h,"__esModule",{value:!0})});
