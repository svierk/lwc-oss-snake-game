import{parseFragment as c,registerTemplate as u,freezeTemplate as v,registerDecorators as w,registerComponent as k,LightningElement as x}from"/1/bundle/esm/l/en-US/bi/0/module/mi/lwc%2Fv%2F2_31_0/s/825961d4b38ab68f2b3fadf00ba6021168288878/bundle_lwc.js";function H(o,e,a){var t=o?"["+o+"]":"";return".container"+t+" {width: 60vw;margin: 0 auto;margin-top: 0;}header"+t+" {line-height: 30px;}"}var p=[H],$=void 0;function O(o,e,a){var t=o?"["+o+"]":"";return".header"+t+" {background: rgb(193, 255, 70);color: rgb(24, 24, 24);font-size: 1rem;}.game-container"+t+" {width: 100%;height: 56vh;background: rgb(193, 255, 70);text-align: center;}.game-play"+t+" div"+t+" {width: 20px;height: 20px;background: rgb(230, 250, 190);display: inline-block;}.snake"+t+" {background: #008001 !important;}.food"+t+" {background: #b90909 !important;border-radius: 50%;}.overlay"+t+" {position: relative;width: 100%;margin-top: -30vh;left: 0;bottom: 0;z-index: 9;}.overlay-content"+t+" {position: relative;top: 50%;text-align: center;}"}var g=[O],B=void 0;const G=c`<div class="slds-text-heading_large${0}"${2}>Game Over!</div>`,I=c`<br${3}>`,z=c`<div class="slds-text-heading_medium${0}"${2}>Use Arrow Keys to move the snake</div>`,F=c`<br${3}>`,C={classMap:{header:!0,"slds-var-p-around_x-small":!0},key:0},A={classMap:{"slds-grid":!0},key:1},j={classMap:{"slds-col":!0,"slds-size_1-of-3":!0},key:2},E={classMap:{"slds-col":!0,"slds-size_1-of-3":!0,"slds-text-align_center":!0},key:3},P={classMap:{"slds-col":!0,"slds-size_1-of-3":!0,"slds-text-align_right":!0},key:4},D={classMap:{"game-container":!0},key:5},L={classMap:{"game-play":!0},key:6},T={classMap:{overlay:!0},key:8},K={classMap:{"overlay-content":!0},key:9},f={"slds-button":!0,"slds-button_brand":!0};function l(o,e,a,t){const{d:r,t:i,h:s,k:d,i:b,st:n,b:y}=o,{_m0:_,_m1:M}=t;return[s("div",C,[s("div",A,[s("div",j,[i("Score: "+r(e.score))]),s("div",E,[i("Speed: "+r(e.displaySpeed)+"x")]),s("div",P,[i("High Score: "+r(e.highScore))])])]),s("div",D,[s("div",L,b(e.gameBlocks,function(m){return s("div",{className:m.class,attrs:{"data-reference":m.id},key:d(7,m.id)},[i("\xA0")])})),e.showOverlay?s("div",T,[s("div",K,[e.gameOver?n(G(),11):null,e.gameOver?n(I(),13):null,e.gameOver?s("button",{classMap:f,key:14,on:{click:_||(t._m0=y(e.resetGame))}},[i("Play Again")]):null,e.gameOver?null:n(z(),16),e.gameOver?null:n(F(),18),e.gameOver?null:s("button",{classMap:f,key:19,on:{click:M||(t._m1=y(e.startGame))}},[i("Start Game")])])]):null])]}var N=u(l);l.stylesheets=[],g&&l.stylesheets.push.apply(l.stylesheets,g),(g||B)&&(l.stylesheetToken="snake-game_game"),v(l);class S extends x{constructor(...e){super(...e);this.gameBlocks=[],this.score=0,this.highScore=0,this.blockSize=20,this.renderComplete=!1,this.xSpeed=1,this.ySpeed=0,this.xHead=0,this.yHead=0,this.xMax=void 0,this.yMax=void 0,this.tail=[],this.showOverlay=!0,this.gameOver=!1,this.speed=1,this.intervalObj=void 0}connectedCallback(){this.highScore=localStorage.getItem("lwc_snake_highscore")?localStorage.getItem("lwc_snake_highscore"):0}renderedCallback(){this.renderComplete||(this.renderComplete=!0,this.renderGameBlocks(),this.addKeyboardControls(),this.generateFood(),window.addEventListener("resize",()=>{this.resetGameMetrics(),this.showOverlay=!0,this.gameOver=!1}))}startGame(){this.showOverlay=!1,this.intervalObj=setInterval(()=>{this.move()},300/this.speed)}addSpeed(){this.speed=this.speed+.1,clearInterval(this.intervalObj),this.startGame()}move(){if(this.tail[this.tail.length-1]!==`${this.xHead}:${this.yHead}`){this.tail.push(`${this.xHead}:${this.yHead}`);const a=this.tail.shift(),t=this.gameBlocks.findIndex(r=>r.id===a);this.gameBlocks[t].snake=!1,this.gameBlocks[t].class=""}if(this.xHead+=this.xSpeed,this.yHead+=this.ySpeed,this.xHead>=this.xMax&&(this.xHead=0),this.xHead<0&&(this.xHead=this.xMax-1),this.yHead>=this.yMax&&(this.yHead=0),this.yHead<0&&(this.yHead=this.yMax-1),this.tail.includes(`${this.xHead}:${this.yHead}`))this.exitGame();else{const a=this.gameBlocks.findIndex(t=>t.id===`${this.xHead}:${this.yHead}`);this.gameBlocks[a].snake=!0,this.gameBlocks[a].class="snake",this.gameBlocks[a].food&&(this.score++,this.score>this.highScore&&(this.highScore=this.score,localStorage.setItem("lwc_snake_highscore",this.highScore)),this.addSpeed(),this.tail.push(`${this.xHead}:${this.yHead}`),this.gameBlocks[a].food=!1,this.generateFood())}}addKeyboardControls(){window.addEventListener("keydown",e=>{switch(e.preventDefault(),e.key){case"ArrowUp":this.xSpeed=0,this.ySpeed=-1;break;case"ArrowDown":this.xSpeed=0,this.ySpeed=1;break;case"ArrowLeft":this.xSpeed=-1,this.ySpeed=0;break;case"ArrowRight":this.xSpeed=1,this.ySpeed=0;break}})}generateFood(){const e=Math.floor(Math.random()*(this.xMax-1)),a=Math.floor(Math.random()*(this.yMax-1));if(this.tail.includes(`${e}:${a}`))this.generateFood();else{const t=this.gameBlocks.findIndex(r=>r.id===`${e}:${a}`);this.gameBlocks[t].food=!0,this.gameBlocks[t].class="food"}}renderGameBlocks(){const e=this.template.querySelector(".game-container"),a=e.clientWidth,t=e.clientHeight;this.xMax=Math.floor(a/this.blockSize),this.yMax=Math.floor(t/this.blockSize);const r=[];for(let i=0;i<this.yMax;i++)for(let s=0;s<this.xMax;s++){let d;s===0&&i===0?d={id:`${s}:${i}`,snake:!0,food:!1,class:"snake"}:d={id:`${s}:${i}`,snake:!1,food:!1,class:""},r.push(d)}this.gameBlocks=r}resetGameMetrics(){this.xSpeed=1,this.ySpeed=0,this.xHead=0,this.yHead=0,this.tail=[],this.score=0,this.speed=1,this.renderGameBlocks(),this.generateFood(),clearInterval(this.intervalObj)}resetGame(){this.resetGameMetrics(),this.startGame()}exitGame(){this.showOverlay=!0,this.gameOver=!0,clearInterval(this.intervalObj)}get displaySpeed(){return this.speed.toFixed(1)}}w(S,{track:{gameBlocks:1},fields:["score","highScore","blockSize","renderComplete","xSpeed","ySpeed","xHead","yHead","xMax","yMax","tail","showOverlay","gameOver","speed","intervalObj"]});var U=k(S,{tmpl:N});const W={classMap:{container:!0},key:0},q={key:1};function h(o,e,a,t){const{c:r,h:i}=o;return[i("div",W,[r("snake-game",U,q)])]}var R=u(h);h.stylesheets=[],p&&h.stylesheets.push.apply(h.stylesheets,p),(p||$)&&(h.stylesheetToken="snake-app_app"),v(h);class J extends x{}var Q=k(J,{tmpl:R});export default Q;
