import{parseFragment as r,registerTemplate as p,freezeTemplate as v,registerDecorators as w,registerComponent as y,LightningElement as u}from"/1/bundle/esm/l/en-US/bi/0/module/mi/lwc%2Fv%2F8_20_4/s/sha256-wohSttyPv8336TX1YKQ6IC6y4_6CFXAQLrCVFCoEHSQ/bundle_lwc.js";function H(o,e,s){var t=o?"["+o+"]":"";return".container"+t+" {width: 60vw;margin: 0 auto;margin-top: 0;}header"+t+" {line-height: 30px;}"}var f=[H];function M(o,e,s){var t=o?"["+o+"]":"";return".header"+t+" {background: rgb(193, 255, 70);color: rgb(24, 24, 24);font-size: 1rem;}.game-container"+t+" {width: 100%;height: 56vh;background: rgb(193, 255, 70);text-align: center;}.game-play"+t+" div"+t+" {width: 20px;height: 20px;background: rgb(230, 250, 190);display: inline-block;}.snake"+t+" {background: #008001 !important;}.food"+t+" {background: #b90909 !important;border-radius: 50%;}.overlay"+t+" {position: relative;width: 100%;margin-top: -30vh;left: 0;bottom: 0;z-index: 9;}.overlay-content"+t+" {position: relative;top: 50%;text-align: center;}"}var x=[M];const O=r`<div class="header slds-var-p-around_x-small${0}"${2}><div class="slds-grid${0}"${2}><div class="slds-col slds-size_1-of-3${0}"${2}>${"t3"}</div><div class="slds-col slds-size_1-of-3 slds-text-align_center${0}"${2}>${"t5"}</div><div class="slds-col slds-size_1-of-3 slds-text-align_right${0}"${2}>${"t7"}</div></div></div>`,B=r`<div${"c0"}${"a0:data-reference"}${2}>Â </div>`,G=r`<div class="slds-text-heading_large${0}"${2}>Game Over!</div>`,C=r`<br${3}>`,I=r`<button class="slds-button slds-button_brand${0}"${2}>Play Again</button>`,F=r`<div class="slds-text-heading_medium${0}"${2}>Use Arrow Keys to move the snake</div>`,z=r`<br${3}>`,A=r`<button class="slds-button slds-button_brand${0}"${2}>Start Game</button>`,j={classMap:{"game-container":!0},key:2},E={classMap:{"game-play":!0},key:3},P={classMap:{overlay:!0},key:6},T={classMap:{"overlay-content":!0},key:7};function n(o,e,s,t){const{d:l,sp:a,st:i,ncls:d,k:_,i:S,h:c,b:g}=o,{_m0:W,_m1:$,_m2:X,_m3:b}=t;return[i(O,1,[a(3,null,"Score: "+l(e.score)),a(5,null,"Speed: "+l(e.displaySpeed)+"x"),a(7,null,"High Score: "+l(e.highScore))]),c("div",j,[c("div",E,S(e.gameBlocks,function(m){return i(B,_(5,m.id),[a(0,{className:d(m.class),attrs:{"data-reference":m.id}},null)])})),e.showOverlay?c("div",P,[c("div",T,[e.gameOver?i(G,9):null,e.gameOver?i(C,11):null,e.gameOver?i(I,13,[a(0,{on:$||(t._m1={click:g(e.resetGame)})},null)]):null,e.gameOver?null:i(F,15),e.gameOver?null:i(z,17),e.gameOver?null:i(A,19,[a(0,{on:b||(t._m3={click:g(e.startGame)})},null)])])]):null])]}var D=p(n);n.stylesheets=[],n.stylesheetToken="lwc-6000sdkgra",n.legacyStylesheetToken="snake-game_game",x&&n.stylesheets.push.apply(n.stylesheets,x),v(n);class k extends u{constructor(...e){super(...e);this.gameBlocks=[],this.score=0,this.highScore=0,this.blockSize=20,this.renderComplete=!1,this.xSpeed=1,this.ySpeed=0,this.xHead=0,this.yHead=0,this.xMax=void 0,this.yMax=void 0,this.tail=[],this.showOverlay=!0,this.gameOver=!1,this.speed=1,this.intervalObj=void 0}connectedCallback(){this.highScore=localStorage.getItem("lwc_snake_highscore")?localStorage.getItem("lwc_snake_highscore"):0}renderedCallback(){this.renderComplete||(this.renderComplete=!0,this.renderGameBlocks(),this.addKeyboardControls(),this.generateFood(),window.addEventListener("resize",()=>{this.resetGameMetrics(),this.showOverlay=!0,this.gameOver=!1}))}startGame(){this.showOverlay=!1,this.intervalObj=setInterval(()=>{this.move()},300/this.speed)}addSpeed(){this.speed=this.speed+.1,clearInterval(this.intervalObj),this.startGame()}move(){if(this.tail[this.tail.length-1]!==`${this.xHead}:${this.yHead}`){this.tail.push(`${this.xHead}:${this.yHead}`);const s=this.tail.shift(),t=this.gameBlocks.findIndex(l=>l.id===s);this.gameBlocks[t].snake=!1,this.gameBlocks[t].class=""}if(this.xHead+=this.xSpeed,this.yHead+=this.ySpeed,this.xHead>=this.xMax&&(this.xHead=0),this.xHead<0&&(this.xHead=this.xMax-1),this.yHead>=this.yMax&&(this.yHead=0),this.yHead<0&&(this.yHead=this.yMax-1),this.tail.includes(`${this.xHead}:${this.yHead}`))this.exitGame();else{const s=this.gameBlocks.findIndex(t=>t.id===`${this.xHead}:${this.yHead}`);this.gameBlocks[s].snake=!0,this.gameBlocks[s].class="snake",this.gameBlocks[s].food&&(this.score++,this.score>this.highScore&&(this.highScore=this.score,localStorage.setItem("lwc_snake_highscore",this.highScore)),this.addSpeed(),this.tail.push(`${this.xHead}:${this.yHead}`),this.gameBlocks[s].food=!1,this.generateFood())}}addKeyboardControls(){window.addEventListener("keydown",e=>{switch(e.preventDefault(),e.key){case"ArrowUp":this.xSpeed=0,this.ySpeed=-1;break;case"ArrowDown":this.xSpeed=0,this.ySpeed=1;break;case"ArrowLeft":this.xSpeed=-1,this.ySpeed=0;break;case"ArrowRight":this.xSpeed=1,this.ySpeed=0;break}})}generateFood(){const e=Math.floor(Math.random()*(this.xMax-1)),s=Math.floor(Math.random()*(this.yMax-1));if(this.tail.includes(`${e}:${s}`))this.generateFood();else{const t=this.gameBlocks.findIndex(l=>l.id===`${e}:${s}`);this.gameBlocks[t]&&(this.gameBlocks[t].food=!0,this.gameBlocks[t].class="food")}}renderGameBlocks(){const e=this.template.querySelector(".game-container"),s=e.clientWidth,t=e.clientHeight;this.xMax=Math.floor(s/this.blockSize),this.yMax=Math.floor(t/this.blockSize);const l=[];for(let a=0;a<this.yMax;a++)for(let i=0;i<this.xMax;i++){let d;i===0&&a===0?d={id:`${i}:${a}`,snake:!0,food:!1,class:"snake"}:d={id:`${i}:${a}`,snake:!1,food:!1,class:""},l.push(d)}this.gameBlocks=l}resetGameMetrics(){this.xSpeed=1,this.ySpeed=0,this.xHead=0,this.yHead=0,this.tail=[],this.score=0,this.speed=1,this.renderGameBlocks(),this.generateFood(),clearInterval(this.intervalObj)}resetGame(){this.resetGameMetrics(),this.startGame()}exitGame(){this.showOverlay=!0,this.gameOver=!0,clearInterval(this.intervalObj)}get displaySpeed(){return this.speed.toFixed(1)}}w(k,{track:{gameBlocks:1},fields:["score","highScore","blockSize","renderComplete","xSpeed","ySpeed","xHead","yHead","xMax","yMax","tail","showOverlay","gameOver","speed","intervalObj"]});const L=y(k,{tmpl:D,sel:"snake-game",apiVersion:66}),K={classMap:{container:!0},key:0},N={key:1};function h(o,e,s,t){const{c:l,h:a}=o;return[a("div",K,[l("snake-game",L,N)])]}var Q=p(h);h.stylesheets=[],h.stylesheetToken="lwc-6m8ifv7aahe",h.legacyStylesheetToken="snake-app_app",f&&h.stylesheets.push.apply(h.stylesheets,f),v(h);class U extends u{}const V=y(U,{tmpl:Q,sel:"snake-app",apiVersion:63});export{V as default};
